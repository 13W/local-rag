@import "tailwindcss";
@source "./app/**/*.{html,ts}";

/* ─── Design tokens ─────────────────────────────── */
:root {
  --color-base:           #1a1a2e;
  --color-deep:           #0f0f23;
  --color-surface:        #2d2d4e;
  --color-border:         #22223a;
  --color-border-input:   #3d3d6e;
  --color-text:           #e0e0e0;
  --color-muted:          #94a3b8;   /* improved from #6b7280 for WCAG AA */
  --color-sky:            #7dd3fc;
  --color-indigo:         #a5b4fc;
  --color-ok:             #4ade80;
  --color-err:            #f87171;
  --color-amber:          #fbbf24;
  --color-action:         #4f46e5;
  --color-action-hover:   #4338ca;
  --color-emerald:        #34d399;
  --color-badge-mcp-bg:   #1e3a5f;
  --color-badge-pg-bg:    #3d2a00;
  --color-badge-watch-bg: #064e3b;
}

/* ─── Base element styles ────────────────────────── */
/* Only styles that cannot be Tailwind utilities:
   border-collapse, tr:hover compound selector, th/td padding */
@layer base {
  *, *::before, *::after { box-sizing: border-box; }

  body {
    font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
    background-color: var(--color-base);
    color: var(--color-text);
    margin: 0;
    padding: 1rem;
    height: 100dvh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  app-root {
    flex: 1 1 0;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }

  app-playground {
    display: flex;
    flex-direction: column;
    height: 100%;
    min-height: 0;
  }

  table { width: 100%; border-collapse: collapse; font-size: 0.82rem; }
  th {
    background-color: var(--color-surface);
    color: var(--color-indigo);
    padding: 0.35rem 0.6rem;
    text-align: left;
  }
  td {
    padding: 0.28rem 0.6rem;
    border-bottom: 1px solid var(--color-border);
    transition: background-color 100ms ease;
  }
  tr:hover td {
    background-color: color-mix(in srgb, var(--color-surface) 33%, transparent);
  }

  select, input:not([type=checkbox]), textarea {
    background-color: var(--color-deep);
    color: var(--color-text);
    border: 1px solid var(--color-border-input);
  }
  option {
    background-color: var(--color-surface);
    color: var(--color-text);
  }
}

/* ─── Scrollbar ──────────────────────────────────── */
@layer base {
  ::-webkit-scrollbar       { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: var(--color-deep); }
  ::-webkit-scrollbar-thumb {
    background: var(--color-border-input);
    border-radius: 3px;
  }
  ::-webkit-scrollbar-thumb:hover { background: var(--color-muted); }
  * { scrollbar-width: thin; scrollbar-color: var(--color-border-input) var(--color-deep); }
}

/* ─── Source badge components ────────────────────── */
/* Kept in @layer components because srcClass() in request-log.component.ts
   returns a single class name string used in [class]="srcClass(e)" binding. */
@layer components {
  .badge-src, .badge-mcp, .badge-pg, .badge-watch {
    @apply inline-block px-[0.35rem] py-[0.1rem] rounded-[3px] text-[0.72rem];
  }
  .badge-mcp   { background-color: var(--color-badge-mcp-bg);   color: var(--color-sky); }
  .badge-pg    { background-color: var(--color-badge-pg-bg);    color: var(--color-amber); }
  .badge-watch { background-color: var(--color-badge-watch-bg); color: var(--color-emerald); }
}
